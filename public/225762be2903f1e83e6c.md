---
title: 【Git】ステージされているまたはされていないファイルのみスタッシュする方法
tags:
  - Git
private: false
updated_at: '2025-11-08T23:56:15+09:00'
id: 225762be2903f1e83e6c
organization_url_name: null
slide: false
ignorePublish: false
---
## ステージされているファイルのみをスタッシュする方法

### コマンド

```bash
git stash --staged
```

このコマンドを使用することで、ステージングエリアに追加されているファイルのみをスタッシュできます。これにより、作業ディレクトリの未ステージの変更を残したまま、ステージされた変更だけを一時退避できます。

### オプション

| オプション | 説明 |
|---|---|
| `--staged` | ステージされたファイルのみをスタッシュ |
| `-m <message>` | スタッシュにメッセージを追加 |

### 使用例

**実行前の状態:**

```bash
$ git status
On branch main
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        modified:   src/main.js
        new file:   src/utils.js

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
        modified:   README.md
        modified:   package.json
```

**コマンド実行:**

```bash
# ステージされた変更をスタッシュ
$ git stash --staged

# または、メッセージ付きでスタッシュ
$ git stash --staged -m "機能追加のステージされた変更を一時保存"
```

**実行後の状態:**

```bash
$ git status
On branch main
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
        modified:   README.md
        modified:   package.json

nothing added to commit but untracked files present (use "git add" to track)
```

ステージされていた `src/main.js` と `src/utils.js` がスタッシュされ、未ステージの変更のみが残ります。

## ステージされていないファイルのみをスタッシュする方法

### コマンド

```bash
git stash --keep-index --include-untracked
```

このコマンドでステージされていない変更のみをスタッシュできます。ステージエリアの内容を保持したまま、未ステージの変更や追跡されていないファイルを一時的に退避できます。

### オプション詳細

**`--keep-index` オプション:**
- ステージされた変更はスタッシュされずに作業ディレクトリに残る

**`--include-untracked` オプション:**
- 追跡されていないファイル（新規作成ファイル）もスタッシュに含める
- 通常の `git stash` では追跡されていないファイルは対象外となる

### 使用例

**実行前の状態:**

```bash
$ git status
On branch main
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        modified:   src/main.js
        new file:   src/utils.js

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   README.md
        modified:   package.json

Untracked files:
  (use "git add <file>..." to include in what will be committed)
        temp.txt
        debug.log
```

**コマンド実行:**

```bash
$ git stash --keep-index --include-untracked
Saved working directory and index state WIP on main: abc1234 Previous commit message
```

**実行後の状態:**

```bash
$ git status
On branch main
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
        modified:   src/main.js
        new file:   src/utils.js

# 未ステージの変更と追跡されていないファイルが消えている
```

ステージされた変更はそのまま残り、未ステージの変更（`README.md`、`package.json`）と追跡されていないファイル（`temp.txt`、`debug.log`）がスタッシュされます。

## まとめ

| 目的 | コマンド |
|---|---|
| ステージされたファイルのみをスタッシュ | `git stash --staged` |
| ステージされていないファイルのみをスタッシュ | `git stash --keep-index --include-untracked` |
